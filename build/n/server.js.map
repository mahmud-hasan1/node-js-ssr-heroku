{"version":3,"file":"n/server.js","mappings":";;;;;;;;;AACA;;AACA;;AAGA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;;AAEA;;;;;;;;;;;;;;;;;;;;;;ACjBA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AAAA;AAAA;AAFA;AAKA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACdA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAGA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;;AAKA;AAgBA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAMA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;ACxFA;AACA;AAGA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;ACNA;AAEA;AAKA;AACA;AADA;;AAIA;AAAA;AAAA;;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AARA;AAUA;;AAEA;AAAA;AAAA;;AACA;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AATA;AAWA;;AAEA;AACA;AACA;AAFA;;;;;;;;;;;;;;;;;ACtCA;AAMA;AACA;AAEA;AAIA;AAEA;;;;;;;;;;;;ACfA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACPA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;ACNA;AAEA;AACA;AACA;AAEA;AAEA;;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAGA;AACA;;;AAEA;AACA;;AAGA;AACA;AACA;AAAA;AACA;AAAA;AAEA;AAEA;AACA;AACA;AACA;AAGA;AAAA;AAAA","sources":["webpack://node-js-getting-started/./server/devServer.js","webpack://node-js-getting-started/./server/helper/createStore.js","webpack://node-js-getting-started/./server/helper/renderer.js","webpack://node-js-getting-started/./src/store/actions/types.js","webpack://node-js-getting-started/./src/store/reducers/index.js","webpack://node-js-getting-started/./src/App.tsx","webpack://node-js-getting-started/external commonjs \"@babel/runtime/helpers/defineProperty\"","webpack://node-js-getting-started/external commonjs \"@loadable/server\"","webpack://node-js-getting-started/external commonjs \"axios\"","webpack://node-js-getting-started/external commonjs \"connect-livereload\"","webpack://node-js-getting-started/external commonjs \"express\"","webpack://node-js-getting-started/external commonjs \"livereload\"","webpack://node-js-getting-started/external commonjs \"react\"","webpack://node-js-getting-started/external commonjs \"react-dom/server\"","webpack://node-js-getting-started/external commonjs \"react-helmet\"","webpack://node-js-getting-started/external commonjs \"react-redux\"","webpack://node-js-getting-started/external commonjs \"react-router-dom\"","webpack://node-js-getting-started/external commonjs \"redux\"","webpack://node-js-getting-started/external commonjs \"redux-thunk\"","webpack://node-js-getting-started/external node-commonjs \"path\"","webpack://node-js-getting-started/webpack/bootstrap","webpack://node-js-getting-started/webpack/runtime/compat get default export","webpack://node-js-getting-started/webpack/runtime/define property getters","webpack://node-js-getting-started/webpack/runtime/hasOwnProperty shorthand","webpack://node-js-getting-started/webpack/runtime/make namespace object","webpack://node-js-getting-started/./server/server.js"],"sourcesContent":["\r\nconst liveReload = require('livereload')\r\nconst connectLiveReload = require('connect-livereload')\r\n\r\n\r\nfunction devServer(app){\r\n  const liveReloadServer = liveReload.createServer()\r\n  liveReloadServer.watch(\"build\")\r\n\r\n  liveReloadServer.server.once(\"connection\", ()=>{\r\n    setTimeout(()=>{\r\n      liveReloadServer.refresh(\"/\")\r\n    }, 100)\r\n  })\r\n\r\n  app.use(connectLiveReload())\r\n}\r\n\r\nmodule.exports = devServer","\r\nimport { createStore, applyMiddleware } from 'redux'\r\nimport reduxThunk  from \"redux-thunk\"\r\nimport Axios from \"axios\";\r\nimport reducers from '../../src/store/reducers'\r\n\r\n\r\nexport default function(req){\r\n  const axiosInstance = Axios.create({\r\n    baseURL :\"http://localhost:4000\",\r\n    headers: { \"cookie\": req.get(\"cookie\") || '' }\r\n  })\r\n\r\n  return createStore(reducers, {}, applyMiddleware(reduxThunk.withExtraArgument(axiosInstance)));\r\n}","import path from \"path\"\r\nimport React from 'react'\r\n\r\nimport { ChunkExtractor } from '@loadable/server'\r\nimport { StaticRouter } from 'react-router-dom'\r\nimport { renderToString } from 'react-dom/server'\r\nimport { Provider } from 'react-redux'\r\nimport { Helmet } from 'react-helmet'\r\nimport App from '../../src/App'\r\n\r\nconst webStats = path.resolve('./build/static/loadable-stats.json')\r\nconst chunkExtractor  = new ChunkExtractor({ statsFile: webStats })\r\n \r\n\r\nexport default (req, store, props, isDev)=>{\r\n\r\n  // const jsx = webExtractor.collectChunks(\r\n  //   <Provider store={store}>\r\n  //     <StaticRouter location={req.url} context={{}} >\r\n  //       <App componentProps={{ props: props, page: req.url }} />\r\n  //     </StaticRouter>\r\n  //   </Provider>\r\n  // )\r\n  \r\n  console.log(chunkExtractor.getLinkTags())\r\n  \r\n  const content = renderToString(\r\n    <StaticRouter location={req.url} context={{}} >\r\n      <App componentProps={{ props: props, page: req.url }} />\r\n    </StaticRouter>\r\n  )\r\n  // const helmet = Helmet.renderStatic()\r\n\r\n  return `\r\n  <html lang=\"en\">\r\n    <head>\r\n      <meta charset=\"UTF-8\">\r\n      <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n      <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\r\n      <meta name=\"themes\" content=\"#f43454\">\r\n\r\n      <link rel=\"shortcut icon\" type=\"image/jpg\" href=\"/public/favicon.ico\"/>\r\n<!--      <link rel=\"stylesheet\" href=\"http://localhost:1000/static/fonts/roboto.css\" />-->\r\n    </head>\r\n    <body>\r\n      <div id=\"backdrop\"></div>\r\n      <div id=\"modal-root\"></div>\r\n      <div id=\"root\">${content}</div>\r\n\r\n      <script id=\"APP_DATA\" type=\"application/json\">${JSON.stringify({ props: props, page: req.url })}</script>\r\n      <script>\r\n        window.INITIAL_STATE = ${JSON.stringify(store.getState())}\r\n      </script>\r\n      ${isDev && <script src=\"//localhost:35729/livereload.js?snipver=1\" async=\"\" defer=\"\"/> }\r\n    </body>\r\n  </html>\r\n` \r\n\r\n\r\n}\r\n//\r\n// return `\r\n//   <html lang=\"en\">\r\n//     <head>\r\n//       <meta charset=\"UTF-8\">\r\n//       <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n//       <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\r\n//       <meta name=\"themes\" content=\"#f43454\">\r\n//       ${helmet.meta.toString()}\r\n//       ${helmet.title.toString()}\r\n//       ${chunkExtractor.getLinkTags()}\r\n//       ${chunkExtractor.getStyleTags()}\r\n//       <link rel=\"shortcut icon\" type=\"image/jpg\" href=\"/public/favicon.ico\"/>\r\n// <!--      <link rel=\"stylesheet\" href=\"http://localhost:1000/static/fonts/roboto.css\" />-->\r\n//     </head>\r\n//     <body>\r\n//       <div id=\"backdrop\"></div>\r\n//       <div id=\"modal-root\"></div>\r\n//       <div id=\"root\">${content}</div>\r\n//\r\n//       ${chunkExtractor.getScriptTags()}\r\n//       <script id=\"APP_DATA\" type=\"application/json\">${JSON.stringify({ props: props, page: req.url })}</script>\r\n//       <script>\r\n//         window.INITIAL_STATE = ${JSON.stringify(store.getState())}\r\n//       </script>\r\n//       ${isDev && <script src=\"//localhost:35729/livereload.js?snipver=1\" async=\"\" defer=\"\"></script> }\r\n//     </body>\r\n//   </html>\r\n// `","export const FETCH_USERS = 'fetch_users'\r\nexport const FETCH_USER = 'fetch_user'\r\n\r\n\r\nexport const LOGIN = \"login\"\r\nexport const LOGOUT = \"logout\"\r\nexport const SIGN_UP = \"signup\"","import { combineReducers } from 'redux'\r\n\r\nimport { FETCH_USERS, FETCH_USER, LOGIN, LOGOUT } from '../actions/types'\r\n\r\n\r\n\r\n\r\nconst initialAuthState = {\r\n  isAuthenticated: false,\r\n}\r\n\r\nconst authReducer = (state=initialAuthState, action)=>{\r\n  switch(action.type){\r\n    case LOGIN :\r\n      return {...state, ...action.payload}\r\n    \r\n    case LOGOUT :\r\n      return {...state, ...action.payload}\r\n\r\n    default:\r\n      return state  \r\n  }\r\n}\r\n\r\nconst usersReducer =(state=[], action)=>{\r\n  switch(action.type){\r\n    \r\n    case FETCH_USERS :      \r\n      return action.payload\r\n\r\n    case FETCH_USER:\r\n      return action.payload\r\n\r\n    default:\r\n      return state  \r\n  }\r\n}\r\n\r\nexport default combineReducers({\r\n  auth: authReducer,\r\n  users: usersReducer\r\n})","import React, {FC} from 'react';\r\n\r\ninterface AppProps{\r\n  componentProps?: object\r\n}\r\n\r\nconst App: FC<AppProps> = (props) => {\r\n  return (\r\n    <div>\r\n      <h1>This is SSR APPLICATION Error: Cannot find module '@loadable/server'\r\n       </h1>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;","module.exports = require(\"@babel/runtime/helpers/defineProperty\");","module.exports = require(\"@loadable/server\");","module.exports = require(\"axios\");","module.exports = require(\"connect-livereload\");","module.exports = require(\"express\");","module.exports = require(\"livereload\");","module.exports = require(\"react\");","module.exports = require(\"react-dom/server\");","module.exports = require(\"react-helmet\");","module.exports = require(\"react-redux\");","module.exports = require(\"react-router-dom\");","module.exports = require(\"redux\");","module.exports = require(\"redux-thunk\");","module.exports = require(\"path\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import express from \"express\"\r\n\r\nimport React from \"react\";\r\nimport renderer from \"./helper/renderer\";\r\nimport createStore from \"./helper/createStore\";\r\n\r\nlet PORT = process.env.PORT || 5000\r\n\r\nlet isDev = false\r\nif(process.env.NodeENV === \"development\"){\r\n  isDev = true\r\n}\r\n\r\nconst app = express()\r\napp.use(express.static(\"build\"));\r\napp.use(\"/public\", express.static(\"public\"));\r\napp.use(express.json())\r\n\r\n\r\nif(isDev){\r\nconst devServer = require('./devServer')\r\n// only for development server............\r\n  devServer(app)\r\n}\r\n\r\n\r\napp.get(\"/api/users\", (req, res)=>{\r\n  res.send([\r\n    {username: 'A'},\r\n    {username: 'B'},\r\n  ])\r\n})\r\n\r\napp.get(\"*\", (req, res) => {\r\n  const store = createStore(req)\r\n  res.send(renderer(req, store, {}, isDev))\r\n});\r\n\r\n\r\napp.listen(PORT, () =>\r\n  console.log(`server a is running http://localhost:${PORT}`)\r\n);\r\n\r\n      "],"names":[],"sourceRoot":""}